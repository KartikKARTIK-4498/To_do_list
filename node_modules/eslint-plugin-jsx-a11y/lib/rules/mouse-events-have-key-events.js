"use strict";

<<<<<<< HEAD
=======
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
>>>>>>> daf1795927da2d71e7fda32ee847e5794b9052d5
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
<<<<<<< HEAD

var _ariaQuery = require("aria-query");

var _jsxAstUtils = require("jsx-ast-utils");

var _schemas = require("../util/schemas");

/**
 * @fileoverview Enforce onmouseover/onmouseout are
 *  accompanied by onfocus/onblur.
 * @author Ethan Cohen
 */
// ----------------------------------------------------------------------------
// Rule Definition
// ----------------------------------------------------------------------------
var mouseOverErrorMessage = 'onMouseOver must be accompanied by onFocus for accessibility.';
var mouseOutErrorMessage = 'onMouseOut must be accompanied by onBlur for accessibility.';
var schema = (0, _schemas.generateObjSchema)();
var _default = {
  meta: {
    docs: {
      url: 'https://github.com/jsx-eslint/eslint-plugin-jsx-a11y/tree/HEAD/docs/rules/mouse-events-have-key-events.md'
=======
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _ariaQuery = require("aria-query");
var _jsxAstUtils = require("jsx-ast-utils");
var _schemas = require("../util/schemas");
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2["default"])(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; } /**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * @fileoverview Enforce onmouseover/onmouseout are
                                                                                                                                                                                                                                                                                                                                                                                                                                                                          *  accompanied by onfocus/onblur.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * @author Ethan Cohen
                                                                                                                                                                                                                                                                                                                                                                                                                                                                          * 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                          */ // ----------------------------------------------------------------------------
// Rule Definition
// ----------------------------------------------------------------------------
var schema = (0, _schemas.generateObjSchema)({
  hoverInHandlers: _objectSpread(_objectSpread({}, _schemas.arraySchema), {}, {
    description: 'An array of events that need to be accompanied by `onFocus`'
  }),
  hoverOutHandlers: _objectSpread(_objectSpread({}, _schemas.arraySchema), {}, {
    description: 'An array of events that need to be accompanied by `onBlur`'
  })
});

// Use `onMouseOver` and `onMouseOut` by default if no config is
// passed in for backwards compatibility
var DEFAULT_HOVER_IN_HANDLERS = ['onMouseOver'];
var DEFAULT_HOVER_OUT_HANDLERS = ['onMouseOut'];
var _default = exports["default"] = {
  meta: {
    docs: {
      url: 'https://github.com/jsx-eslint/eslint-plugin-jsx-a11y/tree/HEAD/docs/rules/mouse-events-have-key-events.md',
      description: 'Enforce that `onMouseOver`/`onMouseOut` are accompanied by `onFocus`/`onBlur` for keyboard-only users.'
>>>>>>> daf1795927da2d71e7fda32ee847e5794b9052d5
    },
    schema: [schema]
  },
  create: function create(context) {
    return {
      JSXOpeningElement: function JSXOpeningElement(node) {
<<<<<<< HEAD
        var name = node.name.name;

        if (!_ariaQuery.dom.get(name)) {
          return;
        }

        var attributes = node.attributes; // Check onmouseover / onfocus pairing.

        var onMouseOver = (0, _jsxAstUtils.getProp)(attributes, 'onMouseOver');
        var onMouseOverValue = (0, _jsxAstUtils.getPropValue)(onMouseOver);

        if (onMouseOver && onMouseOverValue != null) {
          var hasOnFocus = (0, _jsxAstUtils.getProp)(attributes, 'onFocus');
          var onFocusValue = (0, _jsxAstUtils.getPropValue)(hasOnFocus);

          if (hasOnFocus === false || onFocusValue === null || onFocusValue === undefined) {
            context.report({
              node,
              message: mouseOverErrorMessage
            });
          }
        } // Checkout onmouseout / onblur pairing


        var onMouseOut = (0, _jsxAstUtils.getProp)(attributes, 'onMouseOut');
        var onMouseOutValue = (0, _jsxAstUtils.getPropValue)(onMouseOut);

        if (onMouseOut && onMouseOutValue != null) {
          var hasOnBlur = (0, _jsxAstUtils.getProp)(attributes, 'onBlur');
          var onBlurValue = (0, _jsxAstUtils.getPropValue)(hasOnBlur);

          if (hasOnBlur === false || onBlurValue === null || onBlurValue === undefined) {
            context.report({
              node,
              message: mouseOutErrorMessage
=======
        var _options$0$hoverInHan, _options$, _options$0$hoverOutHa, _options$2;
        var name = node.name.name;
        if (!_ariaQuery.dom.get(name)) {
          return;
        }
        var options = context.options;
        var hoverInHandlers = (_options$0$hoverInHan = (_options$ = options[0]) === null || _options$ === void 0 ? void 0 : _options$.hoverInHandlers) !== null && _options$0$hoverInHan !== void 0 ? _options$0$hoverInHan : DEFAULT_HOVER_IN_HANDLERS;
        var hoverOutHandlers = (_options$0$hoverOutHa = (_options$2 = options[0]) === null || _options$2 === void 0 ? void 0 : _options$2.hoverOutHandlers) !== null && _options$0$hoverOutHa !== void 0 ? _options$0$hoverOutHa : DEFAULT_HOVER_OUT_HANDLERS;
        var attributes = node.attributes;

        // Check hover in / onfocus pairing
        var firstHoverInHandlerWithValue = hoverInHandlers.find(function (handler) {
          var prop = (0, _jsxAstUtils.getProp)(attributes, handler);
          var propValue = (0, _jsxAstUtils.getPropValue)(prop);
          return propValue != null;
        });
        if (firstHoverInHandlerWithValue != null) {
          var hasOnFocus = (0, _jsxAstUtils.getProp)(attributes, 'onFocus');
          var onFocusValue = (0, _jsxAstUtils.getPropValue)(hasOnFocus);
          if (hasOnFocus === false || onFocusValue === null || onFocusValue === undefined) {
            context.report({
              node: (0, _jsxAstUtils.getProp)(attributes, firstHoverInHandlerWithValue),
              message: "".concat(firstHoverInHandlerWithValue, " must be accompanied by onFocus for accessibility.")
            });
          }
        }

        // Check hover out / onblur pairing
        var firstHoverOutHandlerWithValue = hoverOutHandlers.find(function (handler) {
          var prop = (0, _jsxAstUtils.getProp)(attributes, handler);
          var propValue = (0, _jsxAstUtils.getPropValue)(prop);
          return propValue != null;
        });
        if (firstHoverOutHandlerWithValue != null) {
          var hasOnBlur = (0, _jsxAstUtils.getProp)(attributes, 'onBlur');
          var onBlurValue = (0, _jsxAstUtils.getPropValue)(hasOnBlur);
          if (hasOnBlur === false || onBlurValue === null || onBlurValue === undefined) {
            context.report({
              node: (0, _jsxAstUtils.getProp)(attributes, firstHoverOutHandlerWithValue),
              message: "".concat(firstHoverOutHandlerWithValue, " must be accompanied by onBlur for accessibility.")
>>>>>>> daf1795927da2d71e7fda32ee847e5794b9052d5
            });
          }
        }
      }
    };
  }
};
<<<<<<< HEAD
exports["default"] = _default;
=======
>>>>>>> daf1795927da2d71e7fda32ee847e5794b9052d5
module.exports = exports.default;